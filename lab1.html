<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Triangle Solver</title>
</head>
<body>
  <h2>JavaScript – Розв’язання прямокутного трикутника</h2>
  <p>Відкрийте консоль браузера (F12 -> Console), щоб побачити інструкцію і результати.</p>

  <script>
    console.log("Використання функції: triangle(value1, type1, value2, type2)");
    console.log("Де type ∈ { 'leg', 'hypotenuse', 'adjacent angle', 'opposite angle', 'angle' }");
    console.log("Приклади виклику:");
    console.log("  triangle(4, 'leg', 8, 'hypotenuse');");
    console.log("  triangle(8, 'hypotenuse', 4, 'leg');");
    console.log("  triangle(30, 'angle', 10, 'hypotenuse');");
    console.log("  triangle(3, 'leg', 40, 'adjacent angle');\n");

    function triangle(val1, type1, val2, type2) {
      type1 = type1.toLowerCase().trim();
      type2 = type2.toLowerCase().trim();

      const validTypes = ["leg", "hypotenuse", "adjacent angle", "opposite angle", "angle"];
      const toRad = deg => deg * Math.PI / 180;
      const toDeg = rad => rad * 180 / Math.PI;


      if (!validTypes.includes(type1) || !validTypes.includes(type2)) {
        console.warn("Невірно вказаний тип аргументів. Перечитайте інструкцію.");
        return "failed";
      }


      if (val1 <= 0 || val2 <= 0) {
        console.warn("Значення сторін і кутів повинні бути більше 0!");
        return "failed";
      }

      let a, b, c, alpha, beta;

      try {

        if ((type1 === "leg" && type2 === "hypotenuse") || (type2 === "leg" && type1 === "hypotenuse")) {
          const leg = type1 === "leg" ? val1 : val2;
          const hyp = type1 === "hypotenuse" ? val1 : val2;

          if (leg >= hyp) {
            console.warn("Катет не може бути більшим або рівним гіпотенузі!");
            return "failed";
          }

          a = leg;
          c = hyp;
          b = Math.sqrt(c ** 2 - a ** 2);
          alpha = toDeg(Math.asin(a / c));
          beta = 90 - alpha;
        }

        else if (type1 === "leg" && type2 === "leg") {
          a = val1;
          b = val2;
          c = Math.sqrt(a ** 2 + b ** 2);
          alpha = toDeg(Math.atan(a / b));
          beta = 90 - alpha;
        }

        else if ((type1 === "hypotenuse" && type2.includes("angle")) || (type2 === "hypotenuse" && type1.includes("angle"))) {
          const hyp = type1 === "hypotenuse" ? val1 : val2;
          const angle = type1.includes("angle") ? val1 : val2;

          if (angle <= 0 || angle >= 90) {
            console.warn("Кут повинен бути більше 0° і менше 90°.");
            return "failed";
          }

          c = hyp;
          alpha = angle;
          beta = 90 - alpha;
          a = c * Math.sin(toRad(alpha));
          b = c * Math.sin(toRad(beta));
        }

        else if ((type1 === "leg" && type2.includes("angle")) || (type2 === "leg" && type1.includes("angle"))) {
          const leg = type1 === "leg" ? val1 : val2;
          const angle = type1.includes("angle") ? val1 : val2;
          const angleType = type1.includes("angle") ? type1 : type2;

          if (angle <= 0 || angle >= 90) {
            console.warn("Кут повинен бути більше 0° і менше 90°.");
            return "failed";
          }

          if (angleType === "opposite angle") {
            alpha = angle;
            beta = 90 - alpha;
            a = leg; 
            c = a / Math.sin(toRad(alpha));
            b = Math.sqrt(c ** 2 - a ** 2);
          } else if (angleType === "adjacent angle") {
            beta = angle;
            alpha = 90 - beta;
            b = leg; 
            c = b / Math.cos(toRad(beta));
            a = Math.sqrt(c ** 2 - b ** 2);
          }
        }
        else {
          console.warn("Несумісна пара типів. Перечитайте інструкцію.");
          return "failed";
        }


        if (a < 1e-6 || b < 1e-6 || c < 1e-6 || a > 1e6 || b > 1e6 || c > 1e6) {
          console.warn("Сторони трикутника занадто малі або великі для обчислень.");
          return "failed";
        }


        console.log("Результати обчислення:");
        console.log(`a (катет) = ${a.toFixed(3)}`);
        console.log(`b (катет) = ${b.toFixed(3)}`);
        console.log(`c (гіпотенуза) = ${c.toFixed(3)}`);
        console.log(`alpha (кут навпроти a) = ${alpha.toFixed(2)}°`);
        console.log(`beta (кут навпроти b) = ${beta.toFixed(2)}°`);
        console.log("------------------------------");
        return "success";

      } catch (e) {
        console.error("Сталася помилка у виконанні.");
        return "failed";
      }
    }

    // Приклади тестів
    triangle(4, "leg", 8, "hypotenuse");
    triangle(5, "leg", 45, "opposite angle");
    triangle(6, "leg", 30, "adjacent angle");
    triangle(1000000, "leg", 90, "opposite angle");
    triangle(0, "leg", 10, "hypotenuse"); // має повернути failed
  </script>
</body>
</html>
