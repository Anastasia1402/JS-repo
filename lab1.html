<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Triangle Solver</title>
</head>
<body>
    
  <h2>JavaScript – Розв’язання прямокутного трикутника</h2>
  <p>Відкрий консоль браузера (F12 → Console), щоб побачити інструкцію і результати.</p>

  <script>
    console.log("Використання функції: triangle(value1, type1, value2, type2)");
    console.log("Де type ∈ { 'leg', 'hypotenuse', 'adjacent angle', 'opposite angle', 'angle' }");
    console.log("Приклади виклику:");
    console.log("  triangle(4, 'leg', 8, 'hypotenuse');");
    console.log("  triangle(8, 'hypotenuse', 4, 'leg');");
    console.log("  triangle(30, 'angle', 10, 'hypotenuse');");
    console.log("  triangle(3, 'leg', 40, 'adjacent angle');\n");

    function triangle(val1, type1, val2, type2) {
      type1 = type1.toLowerCase().trim();
      type2 = type2.toLowerCase().trim();

      const validTypes = ["leg", "hypotenuse", "adjacent angle", "opposite angle", "angle"];
      const toRad = deg => deg * Math.PI / 180;
      const toDeg = rad => rad * 180 / Math.PI;

      if (!validTypes.includes(type1) || !validTypes.includes(type2)) {
        console.log("Невірно вказаний тип аргументів. Перечитайте інструкцію.");
        return "failed";
      }

      if (val1 <= 0 || val2 <= 0) {
        console.log("Значення повинні бути додатними!");
        return "failed";
      }

      let a, b, c, alpha, beta;

      try {
        if ((type1 === "leg" && type2 === "hypotenuse") || (type2 === "leg" && type1 === "hypotenuse")) {
          const leg = type1 === "leg" ? val1 : val2;
          const hyp = type1 === "hypotenuse" ? val1 : val2;

          if (leg >= hyp) {
            console.log("Катет не може бути більшим або рівним гіпотенузі!");
            return "failed";
          }

          const otherLeg = Math.sqrt(hyp ** 2 - leg ** 2);
          const angleOpposite = toDeg(Math.asin(leg / hyp));
          const otherAngle = 90 - angleOpposite;

          a = leg;
          b = otherLeg;
          c = hyp;
          alpha = angleOpposite;
          beta = otherAngle;
        }

        else if (type1 === "leg" && type2 === "leg") {
          a = val1;
          b = val2;
          c = Math.sqrt(a ** 2 + b ** 2);
          alpha = toDeg(Math.atan(a / b));
          beta = 90 - alpha;
        }
        else if ((type1 === "hypotenuse" && type2.includes("angle")) || (type2 === "hypotenuse" && type1.includes("angle"))) {
          const hyp = type1 === "hypotenuse" ? val1 : val2;
          const angle = type1.includes("angle") ? val1 : val2;

          if (angle >= 90) {
            console.log("Кут повинен бути гострим (менше 90°).");
            return "failed";
          }

          alpha = angle;
          beta = 90 - alpha;
          a = hyp * Math.sin(toRad(alpha));
          b = hyp * Math.sin(toRad(beta));
          c = hyp;
        }

        else if ((type1 === "leg" && type2.includes("angle")) || (type2 === "leg" && type1.includes("angle"))) {
          const leg = type1 === "leg" ? val1 : val2;
          const angle = type1.includes("angle") ? val1 : val2;
          const isOpposite = (type1 === "opposite angle" || type2 === "opposite angle");

          if (angle >= 90) {
            console.log("Кут повинен бути гострим (менше 90°).");
            return "failed";
          }

          if (isOpposite) {
            alpha = angle;
            beta = 90 - alpha;
            a = leg;
            c = a / Math.sin(toRad(alpha));
            b = c * Math.sin(toRad(beta));
          } else {
            beta = angle;
            alpha = 90 - beta;
            b = leg;
            c = b / Math.sin(toRad(beta));
            a = c * Math.sin(toRad(alpha));
          }
        }

        else {
          console.log("Несумісна пара типів. Перечитайте інструкцію.");
          return "failed";
        }

        console.log("Результати обчислення:");
        console.log(`a (катет) = ${a.toFixed(3)}`);
        console.log(`b (катет) = ${b.toFixed(3)}`);
        console.log(`c (гіпотенуза) = ${c.toFixed(3)}`);
        console.log(`alpha (кут навпроти a) = ${alpha.toFixed(2)}°`);
        console.log(`beta (кут навпроти b) = ${beta.toFixed(2)}°`);
        console.log("------------------------------");
        return "success";

      } catch (e) {
        console.log("Сталася помилка у виконанні.");
        return "failed";
      }
    }

    triangle(4, "leg", 8, "hypotenuse");
  </script>
</body>
</html>
